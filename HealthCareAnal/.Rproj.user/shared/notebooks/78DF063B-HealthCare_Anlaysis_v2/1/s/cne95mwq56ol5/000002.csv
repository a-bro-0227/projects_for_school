"0","#====combine info===="
"0","comb_df <- df_encounter %>%"
"0","  left_join(df_patient,"
"0","            by = ""patient_id"") %>%"
"0","  mutate(age = time_length(difftime(encounter_datetime, birthdate), ""years"")) %>%"
"0","  left_join(., df_program_in, by = ""patient_id"") %>%"
"0","  left_join(., count_patient_return %>% select(-encounter_type_name),"
"0","            by = ""patient_id"") %>%"
"0","  left_join(., df_hiv,"
"0","            by = c(""encounter_id"", ""patient_id"")) %>%"
"0","  left_join(., df_tb,"
"0","            by = c(""encounter_id"", ""patient_id"")) %>%"
"0","  left_join(., df_diagnosis,"
"0","            by = c(""encounter_id"", ""patient_id"")) %>%"
"0","  left_join(., df_rash,"
"0","            by = c(""encounter_id"", ""patient_id"")) %>%"
"0","  left_join(., df_test,"
"0","            by = c(""encounter_id"", ""patient_id"")) %>%"
"0","  left_join(., df_value,"
"0","            by = c(""encounter_id"", ""patient_id"")) %>%"
"0","  mutate(hiv_stage = ifelse(!is.na(hiv_stage), paste0(""STAGE "", hiv_stage), hiv_stage)) %>%"
"0","  filter(encounter_type_name == ""ADULTRETURN"" & age >= 18) %>%"
"0","  select(-encounter_type_id)"
"0","dup_check <- comb_df[duplicated(comb_df$encounter_id) | duplicated(comb_df$encounter_id, fromLast = T), ]"
"0","comb_df <- comb_df %>% filter(!duplicated(encounter_id) & !duplicated(comb_df$encounter_id, fromLast = T))"
